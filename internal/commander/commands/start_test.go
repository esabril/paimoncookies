package commands

import (
	"github.com/esabril/paimoncookies/internal/service"
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestCommander_GetStartSuccessful(t *testing.T) {
	s := &service.Service{}
	c := NewCommander(s, DefaultTemplatePath, nil)

	expected := `–ü—Ä–∏–≤–µ—Ç, –ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫! üå∏

–¢—ã –ø—Ä–∏–Ω–µ—Å –ø–µ—á–µ–Ω—å–∫–∏? üç™ –ü–∞–π–º–æ–Ω –æ—á–µ–Ω—å —Ä–∞–¥–∞ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å!
–ù–∞–¥–µ—é—Å—å, –ü–∞–π–º–æ–Ω –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –≤ —Ç–≤–æ–µ–º –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–∏, –≤–µ–¥—å –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –∫–ª–∞–¥–µ–∑—å –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏! üí¨

–ù–∞–ø—Ä–∏–º–µ—Ä, —è –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å —Ç–µ–±–µ –æ üóìÔ∏è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: /agenda

–ö—Å—Ç–∞—Ç–∏, —Ç–µ–±–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã: –≥–æ–≤–æ—Ä–∏—Ç—å —Å–æ –º–Ω–æ–π –ø–æ–º–æ–∂–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–∞—è –≤–Ω–∏–∑—É. üìë

–ß—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å —É –ü–∞–π–º–æ–Ω? üôÉ`

	assert.Equal(t, expected, c.GetStart())
}

func TestCommander_GetStartFail(t *testing.T) {
	s := &service.Service{}
	c := NewCommander(s, "wrongTemplatePath/", nil)

	expected := `–û–π, —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –î–∞–≤–∞–π –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥–µ–º, –º–æ–∂–µ—Ç –ø–æ–∑–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è?`

	assert.Equal(t, expected, c.GetStart())
}
